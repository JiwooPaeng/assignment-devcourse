# 6주차_Day2
Node.js 유효성 검사 및 인증 인가 (with. JWT)

## 배운 내용
- 유효성 검사
    - users.js 유효성 검사 추가 및 리팩토링
- JWT
    - 인증, 인가 개념
    - 쿠키, 세션, JWT 비교
    - 데모 파일에 적용 (jwt-demo.js / jsonwebtoken 활용)
    - 로그인 로직에 JWT 발행 로직 추가
- .env 생성
    - dotenv 활용

<br>

# 인증과 인가
## 인증
Authentication
- 사용자임을 확인 (e.g. 로그인)
- 세션 : 로그인이 유지되는 상태

## 인가
Authorization
- 인증 후, 특정 페이지에 접근할 권한이 있는지 확인

<br>

# 쿠키 vs 세션 vs JWT
## 쿠키
- 로그인 시 서버가 쿠키를 생성, 이후 사용자와 서버가 지속적으로 쿠키를 주고 받는다
- 장점 : 서버가 저장하지 않는다 (저장공간 확보, RESTful (Stateless) )
- 단점 : 지속적으로 보내고 받는 과정을 반복하기에 보안에 취약하다

## 세션
- 로그인 후 서버가 정보 저장 후 키를 발급, 사용자와 서버가 키 만을 이용해 사용자 정보 주고 받는다
- 장점 : 보안
- 단점 : 서버가 저장을 하기에 저장 공간을 차지하고, Stateless 하지 못하다

<br>

**보안 취약과 Stateless 라는 단점 극복을 위해 등장**

## JWT
JSON Web Token <br>
[JWT](https://jwt.io/) 

- JSON 형태 데이터를 안전하게 전송하기 위해 사용하는 토큰
    - 토큰은 사용자의 인증, 인가에 사용된다
- 장점 : 보안에 강하고(암호화), Stateless

### JWT 구조
- Header
    - 토큰 암호화에 사용하는 알고리즘
    - JWT
- Payload
    - 사용자 정보가 담긴 부분
    - iat (토큰이 발행된 시간)
- Signature
    - 페이로드 값이 바뀌면 같이 바뀜
    - JWT가 발행한 토큰임을 보장하는 부분

### JWT 인증 인가 절차
1. 클라이언트의 로그인 요청 (post 요청)
2. 서버가 로그인 가능 여부를 확인한 뒤, JWT(토큰)를 클라이언트에게 발행
3. 클라이언트는 다른 요청을 서버에게 보낼 때 JWT를 헤더에 담아 보냄
    - JWT를 통해 로그인 완료된 상태임을 확인
4. 서버는 JWT 서명이 맞는지 확인하고, 권한이 확인되면 클라이언트의 요청에 대한 응답을 전송

<br>

# .env
environment
- 정보 보안을 위해 환경 변수 값을 별도로 설정헤두는 파일
- 프로젝트 최상위 패키지에 존재
- e.g. 포트넘버, 데이터베이스 계정, 암호키